启动日志样例。。。有5个节点分别是zk0/1/2/3/4，现在取的是zookeeper0的启动日志。

2018-05-17 03:52:50,683 [myid:] - INFO  [main:QuorumPeerConfig@136] - Reading configuration from: /root/zkCluster/zookeeper0/bin/../conf/zoo.cfg
2018-05-17 03:52:50,702 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-05-17 03:52:50,702 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-05-17 03:52:50,703 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-05-17 03:52:50,703 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-05-17 03:52:50,704 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-05-17 03:52:50,704 [myid:] - INFO  [main:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-05-17 03:52:50,711 [myid:0] - INFO  [main:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-05-17 03:52:50,711 [myid:0] - INFO  [main:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-05-17 03:52:50,711 [myid:0] - INFO  [main:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-05-17 03:52:50,716 [myid:0] - DEBUG [main:AbstractDynamicMBean@148] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:hiearchy=default
2018-05-17 03:52:50,716 [myid:0] - DEBUG [main:HierarchyDynamicMBean@260] - postRegister is called.
2018-05-17 03:52:50,718 [myid:0] - DEBUG [main:AbstractDynamicMBean@148] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:logger=root
2018-05-17 03:52:50,718 [myid:0] - DEBUG [main:LoggerDynamicMBean@258] - Adding AppenderMBean for appender named CONSOLE
2018-05-17 03:52:50,725 [myid:0] - DEBUG [main:AppenderDynamicMBean@158] - getMBeanInfo called.
2018-05-17 03:52:50,725 [myid:0] - DEBUG [main:AppenderDynamicMBean@337] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:appender=CONSOLE
2018-05-17 03:52:50,727 [myid:0] - DEBUG [main:AppenderDynamicMBean@197] - Adding LayoutMBean:CONSOLE,layout=org.apache.log4j.PatternLayout
2018-05-17 03:52:50,728 [myid:0] - DEBUG [main:LayoutDynamicMBean@140] - getMBeanInfo called.
2018-05-17 03:52:50,728 [myid:0] - DEBUG [main:AbstractDynamicMBean@148] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:appender=CONSOLE,layout=org.apache.log4j.PatternLayout
2018-05-17 03:52:50,728 [myid:0] - DEBUG [main:LoggerDynamicMBean@258] - Adding AppenderMBean for appender named ROLLINGFILE
2018-05-17 03:52:50,728 [myid:0] - DEBUG [main:AppenderDynamicMBean@158] - getMBeanInfo called.
2018-05-17 03:52:50,729 [myid:0] - DEBUG [main:AppenderDynamicMBean@337] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:appender=ROLLINGFILE
2018-05-17 03:52:50,729 [myid:0] - DEBUG [main:AppenderDynamicMBean@197] - Adding LayoutMBean:ROLLINGFILE,layout=org.apache.log4j.PatternLayout
2018-05-17 03:52:50,729 [myid:0] - DEBUG [main:LayoutDynamicMBean@140] - getMBeanInfo called.
2018-05-17 03:52:50,729 [myid:0] - DEBUG [main:AbstractDynamicMBean@148] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:appender=ROLLINGFILE,layout=org.apache.log4j.PatternLayout
2018-05-17 03:52:50,730 [myid:0] - DEBUG [main:LoggerDynamicMBean@258] - Adding AppenderMBean for appender named TRACEFILE
2018-05-17 03:52:50,730 [myid:0] - DEBUG [main:AppenderDynamicMBean@158] - getMBeanInfo called.
2018-05-17 03:52:50,730 [myid:0] - DEBUG [main:AppenderDynamicMBean@337] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:appender=TRACEFILE
2018-05-17 03:52:50,731 [myid:0] - DEBUG [main:AppenderDynamicMBean@197] - Adding LayoutMBean:TRACEFILE,layout=org.apache.log4j.PatternLayout
2018-05-17 03:52:50,731 [myid:0] - DEBUG [main:LayoutDynamicMBean@140] - getMBeanInfo called.
2018-05-17 03:52:50,731 [myid:0] - DEBUG [main:AbstractDynamicMBean@148] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:appender=TRACEFILE,layout=org.apache.log4j.PatternLayout
2018-05-17 03:52:50,732 [myid:0] - DEBUG [main:HierarchyDynamicMBean@128] - ---Adding logger [root] as listener.
2018-05-17 03:52:50,732 [myid:0] - DEBUG [main:AbstractDynamicMBean@148] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:logger=org.apache.zookeeper.server.quorum.flexible.QuorumMaj
2018-05-17 03:52:50,733 [myid:0] - DEBUG [main:HierarchyDynamicMBean@128] - ---Adding logger [org.apache.zookeeper.server.quorum.flexible.QuorumMaj] as listener.
2018-05-17 03:52:50,733 [myid:0] - DEBUG [main:AbstractDynamicMBean@148] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:logger=org.apache.log4j.jmx.LoggerDynamicMBean
2018-05-17 03:52:50,733 [myid:0] - DEBUG [main:HierarchyDynamicMBean@128] - ---Adding logger [org.apache.log4j.jmx.LoggerDynamicMBean] as listener.
2018-05-17 03:52:50,733 [myid:0] - DEBUG [main:AbstractDynamicMBean@148] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:logger=org.apache.zookeeper.jmx.MBeanRegistry
2018-05-17 03:52:50,733 [myid:0] - DEBUG [main:HierarchyDynamicMBean@128] - ---Adding logger [org.apache.zookeeper.jmx.MBeanRegistry] as listener.
2018-05-17 03:52:50,740 [myid:0] - DEBUG [main:AbstractDynamicMBean@148] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:logger=org.apache.zookeeper.server.quorum.QuorumPeer
2018-05-17 03:52:50,740 [myid:0] - DEBUG [main:HierarchyDynamicMBean@128] - ---Adding logger [org.apache.zookeeper.server.quorum.QuorumPeer] as listener.
2018-05-17 03:52:50,740 [myid:0] - DEBUG [main:AbstractDynamicMBean@148] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:logger=org.apache.zookeeper.server.quorum.QuorumPeerConfig
2018-05-17 03:52:50,740 [myid:0] - DEBUG [main:HierarchyDynamicMBean@128] - ---Adding logger [org.apache.zookeeper.server.quorum.QuorumPeerConfig] as listener.
2018-05-17 03:52:50,741 [myid:0] - DEBUG [main:AbstractDynamicMBean@148] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:logger=org.apache.log4j.jmx.AppenderDynamicMBean
2018-05-17 03:52:50,741 [myid:0] - DEBUG [main:HierarchyDynamicMBean@128] - ---Adding logger [org.apache.log4j.jmx.AppenderDynamicMBean] as listener.
2018-05-17 03:52:50,741 [myid:0] - DEBUG [main:AbstractDynamicMBean@148] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:logger=org.apache.zookeeper.server.quorum.QuorumPeerMain
2018-05-17 03:52:50,741 [myid:0] - DEBUG [main:HierarchyDynamicMBean@128] - ---Adding logger [org.apache.zookeeper.server.quorum.QuorumPeerMain] as listener.
2018-05-17 03:52:50,742 [myid:0] - DEBUG [main:AbstractDynamicMBean@148] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:logger=org.apache.log4j.jmx.HierarchyDynamicMBean
2018-05-17 03:52:50,742 [myid:0] - DEBUG [main:HierarchyDynamicMBean@128] - ---Adding logger [org.apache.log4j.jmx.HierarchyDynamicMBean] as listener.
2018-05-17 03:52:50,742 [myid:0] - DEBUG [main:AbstractDynamicMBean@148] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:logger=org.apache.zookeeper.server.DatadirCleanupManager
2018-05-17 03:52:50,742 [myid:0] - DEBUG [main:HierarchyDynamicMBean@128] - ---Adding logger [org.apache.zookeeper.server.DatadirCleanupManager] as listener.
2018-05-17 03:52:50,742 [myid:0] - DEBUG [main:AbstractDynamicMBean@148] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:logger=org.apache.log4j.jmx.LayoutDynamicMBean
2018-05-17 03:52:50,743 [myid:0] - DEBUG [main:HierarchyDynamicMBean@128] - ---Adding logger [org.apache.log4j.jmx.LayoutDynamicMBean] as listener.
2018-05-17 03:52:50,743 [myid:0] - DEBUG [main:AbstractDynamicMBean@148] - preRegister called. Server=com.sun.jmx.mbeanserver.JmxMBeanServer@66d3c617, name=log4j:logger=org.apache.zookeeper.server.ZooKeeperThread
2018-05-17 03:52:50,743 [myid:0] - DEBUG [main:HierarchyDynamicMBean@128] - ---Adding logger [org.apache.zookeeper.server.ZooKeeperThread] as listener.
2018-05-17 03:52:50,743 [myid:0] - INFO  [main:QuorumPeerMain@130] - Starting quorum peer
2018-05-17 03:52:50,757 [myid:0] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-05-17 03:52:50,762 [myid:0] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:2181
2018-05-17 03:52:50,769 [myid:0] - DEBUG [main:FileTxnSnapLog@79] - Opening datadir:/root/zkCluster/zookeeper0/data snapDir:/root/zkCluster/zookeeper0/logs
2018-05-17 03:52:50,772 [myid:0] - INFO  [main:QuorumPeer@1158] - tickTime set to 5000
2018-05-17 03:52:50,772 [myid:0] - INFO  [main:QuorumPeer@1204] - initLimit set to 5
2018-05-17 03:52:50,772 [myid:0] - INFO  [main:QuorumPeer@1178] - minSessionTimeout set to -1
2018-05-17 03:52:50,772 [myid:0] - INFO  [main:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-05-17 03:52:50,784 [myid:0] - INFO  [main:QuorumPeer@1467] - QuorumPeer communication is not secured!
2018-05-17 03:52:50,784 [myid:0] - INFO  [main:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-05-17 03:52:50,789 [myid:0] - DEBUG [main:FileTxnLog$FileTxnIterator@606] - Created new input stream /root/zkCluster/zookeeper0/data/version-2/log.100000001
2018-05-17 03:52:50,791 [myid:0] - DEBUG [main:FileTxnLog$FileTxnIterator@609] - Created new input archive /root/zkCluster/zookeeper0/data/version-2/log.100000001
2018-05-17 03:52:50,808 [myid:0] - DEBUG [main:FileTxnLog$FileTxnIterator@647] - EOF excepton java.io.EOFException: Failed to read /root/zkCluster/zookeeper0/data/version-2/log.100000001
2018-05-17 03:52:50,809 [myid:0] - DEBUG [main:FileTxnLog$FileTxnIterator@606] - Created new input stream /root/zkCluster/zookeeper0/data/version-2/log.800000001
2018-05-17 03:52:50,812 [myid:0] - DEBUG [main:FileTxnLog$FileTxnIterator@609] - Created new input archive /root/zkCluster/zookeeper0/data/version-2/log.800000001
2018-05-17 03:52:50,816 [myid:0] - DEBUG [main:FileTxnLog$FileTxnIterator@647] - EOF excepton java.io.EOFException: Failed to read /root/zkCluster/zookeeper0/data/version-2/log.800000001
2018-05-17 03:52:50,820 [myid:0] - DEBUG [main:QuorumCnxManager@219] - Not initializing connection executor as quorum sasl auth is disabled
2018-05-17 03:52:50,826 [myid:0] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:3001
2018-05-17 03:52:50,829 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:QuorumPeer@874] - Starting quorum peer
2018-05-17 03:52:50,834 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:QuorumPeer@909] - LOOKING
2018-05-17 03:52:50,834 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:QuorumPeer@840] - Initializing leader election protocol...
2018-05-17 03:52:50,835 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@721] - Updating proposal: 0 (newleader), 0x800000012 (newzxid), -1 (oldleader), 0xffffffffffffffff (oldzxid)
2018-05-17 03:52:50,835 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@820] - New election. My id =  0, proposed zxid=0x800000012
2018-05-17 03:52:50,836 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 0 (n.leader), 0x800000012 (n.zxid), 0x1 (n.round), 0 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:52:50,836 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 0 (n.leader), 0x800000012 (n.zxid), 0x1 (n.round), 1 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:52:50,837 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 0 (n.leader), 0x800000012 (n.zxid), 0x1 (n.round), 2 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:52:50,837 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 0 (n.leader), 0x800000012 (n.zxid), 0x1 (n.round), 3 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:52:50,837 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 0 (n.leader), 0x800000012 (n.zxid), 0x1 (n.round), 4 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:52:50,842 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@555] - Opening channel to server 1
2018-05-17 03:52:50,845 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@559] - Connected to server 1
2018-05-17 03:52:50,846 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (1, 0)
2018-05-17 03:52:50,846 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@555] - Opening channel to server 2
2018-05-17 03:52:50,847 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@559] - Connected to server 2
2018-05-17 03:52:50,847 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 0)
2018-05-17 03:52:50,847 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@555] - Opening channel to server 3
2018-05-17 03:52:50,849 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:52:50,849 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 0 (n.leader), 0x800000012 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:52:50,855 [myid:0] - INFO  [localhost/127.0.0.1:3001:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:56476
2018-05-17 03:52:50,855 [myid:0] - DEBUG [localhost/127.0.0.1:3001:QuorumCnxManager@466] - Authenticating learner server.id: 1
2018-05-17 03:52:50,856 [myid:0] - DEBUG [localhost/127.0.0.1:3001:QuorumCnxManager$SendWorker@832] - Address of remote peer: 1
2018-05-17 03:52:50,860 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@614] - id: 0, proposed id: 0, zxid: 0x800000012, proposed zxid: 0x800000012
2018-05-17 03:52:50,860 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@890] - Adding vote: from=0, proposed leader=0, proposed zxid=0x800000012, proposed election epoch=0x1
2018-05-17 03:52:50,862 [myid:0] - WARN  [WorkerSender[myid=0]:QuorumCnxManager@584] - Cannot open channel to 3 at election address localhost/127.0.0.1:3007
java.net.ConnectException: 拒绝连接 (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-05-17 03:52:50,864 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-05-17 03:52:50,864 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@555] - Opening channel to server 4
2018-05-17 03:52:50,864 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@559] - Connected to server 4
2018-05-17 03:52:50,865 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (4, 0)
2018-05-17 03:52:50,871 [myid:0] - INFO  [localhost/127.0.0.1:3001:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:56478
2018-05-17 03:52:50,871 [myid:0] - DEBUG [localhost/127.0.0.1:3001:QuorumCnxManager@466] - Authenticating learner server.id: 2
2018-05-17 03:52:50,871 [myid:0] - DEBUG [localhost/127.0.0.1:3001:QuorumCnxManager$SendWorker@832] - Address of remote peer: 2
2018-05-17 03:52:50,874 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:52:50,875 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 4 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), LOOKING (n.state), 1 (n.sid), 0xd (n.peerEpoch) LOOKING (my state)
2018-05-17 03:52:50,875 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:52:50,875 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 4 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), FOLLOWING (n.state), 1 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:52:50,875 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@614] - id: 4, proposed id: 0, zxid: 0x800000012, proposed zxid: 0x800000012
2018-05-17 03:52:50,875 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@721] - Updating proposal: 0 (newleader), 0x800000012 (newzxid), 0 (oldleader), 0x800000012 (oldzxid)
2018-05-17 03:52:50,875 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 0 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), 0 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:52:50,875 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 0 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), 1 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:52:50,876 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 0 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), 2 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:52:50,876 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 0 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), 3 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:52:50,876 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 0 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), 4 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:52:50,876 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@890] - Adding vote: from=1, proposed leader=4, proposed zxid=0x800000012, proposed election epoch=0xc
2018-05-17 03:52:50,876 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:52:50,876 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 0 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), LOOKING (n.state), 0 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:52:50,878 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@614] - id: 0, proposed id: 0, zxid: 0x800000012, proposed zxid: 0x800000012
2018-05-17 03:52:50,879 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@890] - Adding vote: from=0, proposed leader=0, proposed zxid=0x800000012, proposed election epoch=0xc
2018-05-17 03:52:50,882 [myid:0] - INFO  [localhost/127.0.0.1:3001:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:56482
2018-05-17 03:52:50,882 [myid:0] - DEBUG [localhost/127.0.0.1:3001:QuorumCnxManager@466] - Authenticating learner server.id: 4
2018-05-17 03:52:50,882 [myid:0] - DEBUG [localhost/127.0.0.1:3001:QuorumCnxManager$SendWorker@832] - Address of remote peer: 4
2018-05-17 03:52:50,882 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:52:50,883 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 4 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), LOOKING (n.state), 2 (n.sid), 0xd (n.peerEpoch) LOOKING (my state)
2018-05-17 03:52:50,883 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:52:50,883 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 4 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), FOLLOWING (n.state), 2 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:52:50,884 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@614] - id: 4, proposed id: 0, zxid: 0x800000012, proposed zxid: 0x800000012
2018-05-17 03:52:50,884 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@890] - Adding vote: from=2, proposed leader=4, proposed zxid=0x800000012, proposed election epoch=0xc
2018-05-17 03:52:50,887 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 1
2018-05-17 03:52:50,888 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 2
2018-05-17 03:52:50,888 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@555] - Opening channel to server 3
2018-05-17 03:52:50,888 [myid:0] - WARN  [WorkerSender[myid=0]:QuorumCnxManager@584] - Cannot open channel to 3 at election address localhost/127.0.0.1:3007
java.net.ConnectException: 拒绝连接 (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-05-17 03:52:50,889 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-05-17 03:52:50,889 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 4
2018-05-17 03:52:50,905 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:52:50,906 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 4 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), FOLLOWING (n.state), 1 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:52:50,906 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:52:50,906 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 4 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), FOLLOWING (n.state), 2 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:52:50,907 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:52:50,907 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 4 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), LOOKING (n.state), 4 (n.sid), 0xd (n.peerEpoch) LOOKING (my state)
2018-05-17 03:52:50,907 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:52:50,907 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 4 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), LEADING (n.state), 4 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:52:50,907 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:52:50,907 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 4 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), LEADING (n.state), 4 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:52:50,907 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@614] - id: 4, proposed id: 0, zxid: 0x800000012, proposed zxid: 0x800000012
2018-05-17 03:52:50,908 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@890] - Adding vote: from=4, proposed leader=4, proposed zxid=0x800000012, proposed election epoch=0xc
2018-05-17 03:52:50,908 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@743] - I'm a participant: 0
2018-05-17 03:52:50,908 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@553] - About to leave FLE instance: leader=4, zxid=0x800000012, my id=0, my state=FOLLOWING
2018-05-17 03:52:50,908 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@1002] - Number of connection processing threads: 0
2018-05-17 03:52:50,908 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:QuorumPeer@979] - FOLLOWING
2018-05-17 03:52:50,912 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Learner@86] - TCP NoDelay set to: true
2018-05-17 03:52:50,917 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Environment@100] - Server environment:zookeeper.version=3.4.11-37e277162d567b55a07d1755f0b31c32e93c01a0, built on 11/01/2017 18:06 GMT
2018-05-17 03:52:50,917 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Environment@100] - Server environment:host.name=localhost
2018-05-17 03:52:50,917 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Environment@100] - Server environment:java.version=1.8.0_161
2018-05-17 03:52:50,917 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Environment@100] - Server environment:java.vendor=Oracle Corporation
2018-05-17 03:52:50,917 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Environment@100] - Server environment:java.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.161-0.b14.el7_4.x86_64/jre
2018-05-17 03:52:50,917 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Environment@100] - Server environment:java.class.path=/root/zkCluster/zookeeper0/bin/../build/classes:/root/zkCluster/zookeeper0/bin/../build/lib/*.jar:/root/zkCluster/zookeeper0/bin/../lib/slf4j-log4j12-1.6.1.jar:/root/zkCluster/zookeeper0/bin/../lib/slf4j-api-1.6.1.jar:/root/zkCluster/zookeeper0/bin/../lib/netty-3.10.5.Final.jar:/root/zkCluster/zookeeper0/bin/../lib/log4j-1.2.16.jar:/root/zkCluster/zookeeper0/bin/../lib/jline-0.9.94.jar:/root/zkCluster/zookeeper0/bin/../lib/audience-annotations-0.5.0.jar:/root/zkCluster/zookeeper0/bin/../zookeeper-3.4.11.jar:/root/zkCluster/zookeeper0/bin/../src/java/lib/*.jar:/root/zkCluster/zookeeper0/bin/../conf:
2018-05-17 03:52:50,917 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Environment@100] - Server environment:java.library.path=/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib
2018-05-17 03:52:50,917 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Environment@100] - Server environment:java.io.tmpdir=/tmp
2018-05-17 03:52:50,918 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Environment@100] - Server environment:java.compiler=<NA>
2018-05-17 03:52:50,930 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Environment@100] - Server environment:os.name=Linux
2018-05-17 03:52:50,930 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Environment@100] - Server environment:os.arch=amd64
2018-05-17 03:52:50,930 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Environment@100] - Server environment:os.version=3.10.0-514.26.2.el7.x86_64
2018-05-17 03:52:50,930 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Environment@100] - Server environment:user.name=root
2018-05-17 03:52:50,930 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Environment@100] - Server environment:user.home=/root
2018-05-17 03:52:50,930 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Environment@100] - Server environment:user.dir=/root/zkCluster
2018-05-17 03:52:50,932 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:ZooKeeperServer@173] - Created server with tickTime 5000 minSessionTimeout 10000 maxSessionTimeout 100000 datadir /root/zkCluster/zookeeper0/data/version-2 snapdir /root/zkCluster/zookeeper0/logs/version-2
2018-05-17 03:52:50,933 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 98
2018-05-17 03:52:50,935 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-05-17 03:52:50,945 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Learner@332] - Getting a diff from the leader 0x800000012
2018-05-17 03:52:51,155 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error =
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-05-17 03:52:51,156 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-05-17 03:52:51,156 [myid:0] - DEBUG [RecvWorker:1:QuorumCnxManager$SendWorker@850] - Calling finish for 1
2018-05-17 03:52:51,156 [myid:0] - DEBUG [RecvWorker:1:QuorumCnxManager$SendWorker@870] - Removing entry from senderWorkerMap sid=1
2018-05-17 03:52:51,161 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-05-17 03:52:51,162 [myid:0] - DEBUG [SendWorker:1:QuorumCnxManager$SendWorker@850] - Calling finish for 1
2018-05-17 03:52:51,162 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-05-17 03:52:55,012 [myid:0] - INFO  [localhost/127.0.0.1:3001:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:56488
2018-05-17 03:52:55,013 [myid:0] - DEBUG [localhost/127.0.0.1:3001:QuorumCnxManager@466] - Authenticating learner server.id: 1
2018-05-17 03:52:55,013 [myid:0] - DEBUG [localhost/127.0.0.1:3001:QuorumCnxManager$SendWorker@832] - Address of remote peer: 1
2018-05-17 03:52:55,014 [myid:0] - DEBUG [SendWorker:1:QuorumCnxManager$SendWorker@912] - Attempting to send lastMessage to sid=1
2018-05-17 03:52:55,047 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:52:55,047 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 1 (n.leader), 0x800000012 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0xe (n.peerEpoch) FOLLOWING (my state)
2018-05-17 03:52:55,047 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@371] - Sending new notification. My id =  0 recipient=1 zxid=0x800000012 leader=4
2018-05-17 03:52:55,047 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 1
2018-05-17 03:52:55,076 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:52:55,076 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 1 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), LOOKING (n.state), 1 (n.sid), 0xe (n.peerEpoch) FOLLOWING (my state)
2018-05-17 03:52:55,076 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@371] - Sending new notification. My id =  0 recipient=1 zxid=0x800000012 leader=4
2018-05-17 03:52:55,079 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 1
2018-05-17 03:52:55,241 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error =
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-05-17 03:52:55,242 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-05-17 03:52:55,242 [myid:0] - DEBUG [RecvWorker:2:QuorumCnxManager$SendWorker@850] - Calling finish for 2
2018-05-17 03:52:55,242 [myid:0] - DEBUG [RecvWorker:2:QuorumCnxManager$SendWorker@870] - Removing entry from senderWorkerMap sid=2
2018-05-17 03:52:55,247 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-05-17 03:52:55,248 [myid:0] - DEBUG [SendWorker:2:QuorumCnxManager$SendWorker@850] - Calling finish for 2
2018-05-17 03:52:55,248 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-05-17 03:52:58,998 [myid:0] - INFO  [localhost/127.0.0.1:3001:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:56504
2018-05-17 03:52:58,999 [myid:0] - DEBUG [localhost/127.0.0.1:3001:QuorumCnxManager@466] - Authenticating learner server.id: 2
2018-05-17 03:52:58,999 [myid:0] - DEBUG [localhost/127.0.0.1:3001:QuorumCnxManager$SendWorker@832] - Address of remote peer: 2
2018-05-17 03:52:59,000 [myid:0] - DEBUG [SendWorker:2:QuorumCnxManager$SendWorker@912] - Attempting to send lastMessage to sid=2
2018-05-17 03:52:59,006 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:52:59,006 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 2 (n.leader), 0x800000012 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0xe (n.peerEpoch) FOLLOWING (my state)
2018-05-17 03:52:59,006 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@371] - Sending new notification. My id =  0 recipient=2 zxid=0x800000012 leader=4
2018-05-17 03:52:59,007 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 2
2018-05-17 03:52:59,023 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:52:59,023 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 2 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), LOOKING (n.state), 2 (n.sid), 0xe (n.peerEpoch) FOLLOWING (my state)
2018-05-17 03:52:59,023 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@371] - Sending new notification. My id =  0 recipient=2 zxid=0x800000012 leader=4
2018-05-17 03:52:59,023 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 2
2018-05-17 03:53:03,051 [myid:0] - INFO  [localhost/127.0.0.1:3001:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:56522
2018-05-17 03:53:03,052 [myid:0] - DEBUG [localhost/127.0.0.1:3001:QuorumCnxManager@466] - Authenticating learner server.id: 3
2018-05-17 03:53:03,052 [myid:0] - DEBUG [localhost/127.0.0.1:3001:QuorumCnxManager$SendWorker@832] - Address of remote peer: 3
2018-05-17 03:53:03,055 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:03,055 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 3 (n.leader), 0x800000012 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0xd (n.peerEpoch) FOLLOWING (my state)
2018-05-17 03:53:03,055 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@371] - Sending new notification. My id =  0 recipient=3 zxid=0x800000012 leader=4
2018-05-17 03:53:03,059 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 3
2018-05-17 03:53:03,084 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:03,084 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 0 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), LOOKING (n.state), 3 (n.sid), 0xe (n.peerEpoch) FOLLOWING (my state)
2018-05-17 03:53:03,084 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@371] - Sending new notification. My id =  0 recipient=3 zxid=0x800000012 leader=4
2018-05-17 03:53:03,085 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 3
2018-05-17 03:53:03,094 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:03,094 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 1 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), LOOKING (n.state), 3 (n.sid), 0xe (n.peerEpoch) FOLLOWING (my state)
2018-05-17 03:53:03,094 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@371] - Sending new notification. My id =  0 recipient=3 zxid=0x800000012 leader=4
2018-05-17 03:53:03,095 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 3
2018-05-17 03:53:03,107 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:03,107 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 2 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), LOOKING (n.state), 3 (n.sid), 0xe (n.peerEpoch) FOLLOWING (my state)
2018-05-17 03:53:03,107 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@371] - Sending new notification. My id =  0 recipient=3 zxid=0x800000012 leader=4
2018-05-17 03:53:03,107 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 3
2018-05-17 03:53:03,374 [myid:0] - WARN  [RecvWorker:4:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 4, my id = 0, error =
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-05-17 03:53:03,374 [myid:0] - WARN  [RecvWorker:4:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-05-17 03:53:03,374 [myid:0] - DEBUG [RecvWorker:4:QuorumCnxManager$SendWorker@850] - Calling finish for 4
2018-05-17 03:53:03,374 [myid:0] - DEBUG [RecvWorker:4:QuorumCnxManager$SendWorker@870] - Removing entry from senderWorkerMap sid=4
2018-05-17 03:53:03,382 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-05-17 03:53:03,383 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-05-17 03:53:03,383 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FollowerZooKeeperServer@140] - Shutting down
2018-05-17 03:53:03,383 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:ZooKeeperServer@501] - shutting down
2018-05-17 03:53:03,383 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FollowerRequestProcessor@107] - Shutting down
2018-05-17 03:53:03,383 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:CommitProcessor@184] - Shutting down
2018-05-17 03:53:03,383 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FinalRequestProcessor@403] - shutdown of request processor complete
2018-05-17 03:53:03,384 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:SyncRequestProcessor@208] - Shutting down
2018-05-17 03:53:03,387 [myid:0] - WARN  [SendWorker:4:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-05-17 03:53:03,387 [myid:0] - DEBUG [SendWorker:4:QuorumCnxManager$SendWorker@850] - Calling finish for 4
2018-05-17 03:53:03,388 [myid:0] - WARN  [SendWorker:4:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-05-17 03:53:03,407 [myid:0] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-05-17 03:53:03,408 [myid:0] - INFO  [CommitProcessor:0:CommitProcessor@153] - CommitProcessor exited loop!
2018-05-17 03:53:03,417 [myid:0] - INFO  [SyncThread:0:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-05-17 03:53:03,425 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:03,425 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 3 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), LOOKING (n.state), 3 (n.sid), 0xe (n.peerEpoch) FOLLOWING (my state)
2018-05-17 03:53:03,426 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@371] - Sending new notification. My id =  0 recipient=3 zxid=0x800000012 leader=4
2018-05-17 03:53:03,427 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 3
2018-05-17 03:53:03,452 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:QuorumPeer@909] - LOOKING
2018-05-17 03:53:03,452 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:QuorumPeer@840] - Initializing leader election protocol...
2018-05-17 03:53:03,453 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@721] - Updating proposal: 0 (newleader), 0x800000012 (newzxid), 0 (oldleader), 0x800000012 (oldzxid)
2018-05-17 03:53:03,453 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@820] - New election. My id =  0, proposed zxid=0x800000012
2018-05-17 03:53:03,453 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 0 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), 0 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:53:03,453 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 0 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), 1 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:53:03,453 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 0 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), 2 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:53:03,454 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 0 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), 3 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:53:03,454 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 0 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), 4 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:53:03,465 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 1
2018-05-17 03:53:03,465 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 2
2018-05-17 03:53:03,465 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 3
2018-05-17 03:53:03,465 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@555] - Opening channel to server 4
2018-05-17 03:53:03,466 [myid:0] - WARN  [WorkerSender[myid=0]:QuorumCnxManager@584] - Cannot open channel to 4 at election address localhost/127.0.0.1:3009
java.net.ConnectException: 拒绝连接 (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-05-17 03:53:03,466 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-05-17 03:53:03,467 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:03,467 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 0 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), LOOKING (n.state), 0 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:53:03,469 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:03,470 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 4 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), FOLLOWING (n.state), 1 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:53:03,470 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:03,470 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 4 (n.leader), 0x800000012 (n.zxid), 0xc (n.round), FOLLOWING (n.state), 2 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:53:03,476 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:03,476 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 2 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), LOOKING (n.state), 2 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:53:03,487 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:03,487 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 1 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), LOOKING (n.state), 1 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:53:03,491 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@614] - id: 0, proposed id: 0, zxid: 0x800000012, proposed zxid: 0x800000012
2018-05-17 03:53:03,491 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@890] - Adding vote: from=0, proposed leader=0, proposed zxid=0x800000012, proposed election epoch=0xd
2018-05-17 03:53:03,492 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@614] - id: 2, proposed id: 0, zxid: 0x800000012, proposed zxid: 0x800000012
2018-05-17 03:53:03,492 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@721] - Updating proposal: 2 (newleader), 0x800000012 (newzxid), 0 (oldleader), 0x800000012 (oldzxid)
2018-05-17 03:53:03,492 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 2 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), 0 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:53:03,492 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 2 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), 1 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:53:03,492 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 2 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), 2 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:53:03,492 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 2 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), 3 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:53:03,492 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 2 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), 4 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:53:03,492 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@890] - Adding vote: from=2, proposed leader=2, proposed zxid=0x800000012, proposed election epoch=0xd
2018-05-17 03:53:03,492 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@614] - id: 1, proposed id: 2, zxid: 0x800000012, proposed zxid: 0x800000012
2018-05-17 03:53:03,492 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@890] - Adding vote: from=1, proposed leader=1, proposed zxid=0x800000012, proposed election epoch=0xd
2018-05-17 03:53:03,493 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 1
2018-05-17 03:53:03,493 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 2
2018-05-17 03:53:03,493 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 3
2018-05-17 03:53:03,493 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@555] - Opening channel to server 4
2018-05-17 03:53:03,493 [myid:0] - WARN  [WorkerSender[myid=0]:QuorumCnxManager@584] - Cannot open channel to 4 at election address localhost/127.0.0.1:3009
java.net.ConnectException: 拒绝连接 (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-05-17 03:53:03,494 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-05-17 03:53:03,506 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:03,506 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 2 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), LOOKING (n.state), 0 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:53:03,522 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:03,522 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 2 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), LOOKING (n.state), 1 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:53:03,541 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@614] - id: 2, proposed id: 2, zxid: 0x800000012, proposed zxid: 0x800000012
2018-05-17 03:53:03,541 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@890] - Adding vote: from=0, proposed leader=2, proposed zxid=0x800000012, proposed election epoch=0xd
2018-05-17 03:53:03,542 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@614] - id: 2, proposed id: 2, zxid: 0x800000012, proposed zxid: 0x800000012
2018-05-17 03:53:03,542 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@890] - Adding vote: from=1, proposed leader=2, proposed zxid=0x800000012, proposed election epoch=0xd
2018-05-17 03:53:03,747 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:03,747 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 3 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), LOOKING (n.state), 3 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:53:03,750 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@614] - id: 3, proposed id: 2, zxid: 0x800000012, proposed zxid: 0x800000012
2018-05-17 03:53:03,750 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@614] - id: 3, proposed id: 2, zxid: 0x800000012, proposed zxid: 0x800000012
2018-05-17 03:53:03,750 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@721] - Updating proposal: 3 (newleader), 0x800000012 (newzxid), 2 (oldleader), 0x800000012 (oldzxid)
2018-05-17 03:53:03,750 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 3 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), 0 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:53:03,750 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 3 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), 1 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:53:03,750 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 3 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), 2 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:53:03,750 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 3 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), 3 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:53:03,751 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@591] - Sending Notification: 3 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), 4 (recipient), 0 (myid), 0xe (n.peerEpoch)
2018-05-17 03:53:03,751 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@890] - Adding vote: from=3, proposed leader=3, proposed zxid=0x800000012, proposed election epoch=0xd
2018-05-17 03:53:03,754 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 1
2018-05-17 03:53:03,755 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 2
2018-05-17 03:53:03,755 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 3
2018-05-17 03:53:03,755 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@555] - Opening channel to server 4
2018-05-17 03:53:03,755 [myid:0] - WARN  [WorkerSender[myid=0]:QuorumCnxManager@584] - Cannot open channel to 4 at election address localhost/127.0.0.1:3009
java.net.ConnectException: 拒绝连接 (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-05-17 03:53:03,756 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-05-17 03:53:03,775 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:03,775 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 3 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), LOOKING (n.state), 0 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:53:03,775 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:03,775 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 3 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), LOOKING (n.state), 1 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:53:03,775 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:03,775 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 2 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), LEADING (n.state), 2 (n.sid), 0xe (n.peerEpoch) LOOKING (my state)
2018-05-17 03:53:03,777 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@614] - id: 3, proposed id: 3, zxid: 0x800000012, proposed zxid: 0x800000012
2018-05-17 03:53:03,777 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@890] - Adding vote: from=0, proposed leader=3, proposed zxid=0x800000012, proposed election epoch=0xd
2018-05-17 03:53:03,777 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@614] - id: 3, proposed id: 3, zxid: 0x800000012, proposed zxid: 0x800000012
2018-05-17 03:53:03,777 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@890] - Adding vote: from=1, proposed leader=3, proposed zxid=0x800000012, proposed election epoch=0xd
2018-05-17 03:53:03,777 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@614] - id: 2, proposed id: 3, zxid: 0x800000012, proposed zxid: 0x800000012
2018-05-17 03:53:03,982 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@743] - I'm a participant: 0
2018-05-17 03:53:03,983 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@553] - About to leave FLE instance: leader=3, zxid=0x800000012, my id=0, my state=FOLLOWING
2018-05-17 03:53:03,983 [myid:0] - DEBUG [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:FastLeaderElection@1002] - Number of connection processing threads: 0
2018-05-17 03:53:03,983 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:QuorumPeer@979] - FOLLOWING
2018-05-17 03:53:03,983 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:ZooKeeperServer@173] - Created server with tickTime 5000 minSessionTimeout 10000 maxSessionTimeout 100000 datadir /root/zkCluster/zookeeper0/data/version-2 snapdir /root/zkCluster/zookeeper0/logs/version-2
2018-05-17 03:53:03,983 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 530
2018-05-17 03:53:03,985 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-05-17 03:53:03,985 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Learner@237] - Unexpected exception, tries=0, connecting to localhost/127.0.0.1:3006
java.net.ConnectException: 拒绝连接 (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.Learner.connectToLeader(Learner.java:229)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:72)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-05-17 03:53:04,998 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:2181:Learner@332] - Getting a diff from the leader 0x800000012
2018-05-17 03:53:07,277 [myid:0] - INFO  [localhost/127.0.0.1:3001:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:56564
2018-05-17 03:53:07,277 [myid:0] - DEBUG [localhost/127.0.0.1:3001:QuorumCnxManager@466] - Authenticating learner server.id: 4
2018-05-17 03:53:07,277 [myid:0] - DEBUG [localhost/127.0.0.1:3001:QuorumCnxManager$SendWorker@832] - Address of remote peer: 4
2018-05-17 03:53:07,284 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:07,284 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 4 (n.leader), 0x800000012 (n.zxid), 0x1 (n.round), LOOKING (n.state), 4 (n.sid), 0xe (n.peerEpoch) FOLLOWING (my state)
2018-05-17 03:53:07,284 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@371] - Sending new notification. My id =  0 recipient=4 zxid=0x800000012 leader=3
2018-05-17 03:53:07,285 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 4
2018-05-17 03:53:07,301 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:07,301 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 4 (n.leader), 0x800000012 (n.zxid), 0xd (n.round), LOOKING (n.state), 4 (n.sid), 0xe (n.peerEpoch) FOLLOWING (my state)
2018-05-17 03:53:07,301 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@371] - Sending new notification. My id =  0 recipient=4 zxid=0x800000012 leader=3
2018-05-17 03:53:07,303 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 4
2018-05-17 03:53:28,806 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@274] - Receive new notification message. My id = 0
2018-05-17 03:53:28,807 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@602] - Notification: 1 (message format version), 2 (n.leader), 0x800000012 (n.zxid), 0xe (n.round), LOOKING (n.state), 2 (n.sid), 0xe (n.peerEpoch) FOLLOWING (my state)
2018-05-17 03:53:28,807 [myid:0] - DEBUG [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@371] - Sending new notification. My id =  0 recipient=2 zxid=0x800000012 leader=3
2018-05-17 03:53:28,807 [myid:0] - DEBUG [WorkerSender[myid=0]:QuorumCnxManager@595] - There is a connection already for server 2